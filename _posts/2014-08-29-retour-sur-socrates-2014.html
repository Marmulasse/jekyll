---
layout: post
title: Retour sur SoCraTes 2014
date: 2014-08-29 09:52:12.000000000 +02:00
type: post
published: true
status: publish
categories:
- Bonnes pratiques de dév
- Evénements
- Programmation
tags:
- Socrates
- Socrates14
- software craftsmanship
meta:
  _wpcom_is_markdown: '1'
  _edit_last: '1'
  sfw_pwd: O7BdKMg88buP
  _activeshortener: tiny
  _twitterrelated_short_url: http://tinyurl.com/llkvvyd
  _twitterrelated_short_urlHash: 87206a34b132f99ba31de832d8c4b6eb
author:
  login: yakhya dabo
  email: yakhya.dabo@arolla.fr
  display_name: Yakhya Dabo
  first_name: Yakhya
  last_name: Dabo
---
<p style="text-align: justify;">C'est à travers <span style="color: #000080;"><strong><a href="http://www.arolla.fr/blog/2012/08/socrates-2012-my-best-conference-ever/"><span style="color: #000080;">le billet de Cyrille</span></a></strong></span> que j'ai connu SoCraTes (Software Craftsmanship and Testing). J'ai eu l'occasion de participer à la quatrième édition qui s'est tenue du 7 au 10 Aout en Allemagne. C'est une anticonférence dont originalité repose tant sur l'état d'esprit des participants que sur l'organisation informelle des sessions. On est loin de la rigidité des conférences traditionnelles, hyper structurées, avec des diapos taillées sur mesure, où pour la plupart la forme l'emporte sur le contenu. Pas de CFP, pas de programme, on sait juste que 150 personnes vont se rencontrer, quelque part à Soltau, pour parler de Software Crafstmanship. Et c'est tout. Les détails du contenu seront discutés une fois sur place. Ils seront adaptés en fonction de l'attente des participants et du déroulement de la conférence. Beaucoup parlent de “<em><strong>unconference</strong></em>” (anti-conférence) pour son côté informel. On peut aussi choisir le terme "<strong><em>meta-conference</em></strong>" puisque c'est pendant la conférence qu'on décide de ce que sera la conférence, ou de “<strong><em>collaborative conference</em></strong>” du fait de la participation de tous à l'organisation.</p>
<p style="text-align: justify;"><a href="http://www.arolla.fr/blog/wp-content/uploads/2014/09/BugCYS7CQAAWhOV.jpglarge.jpeg"><img class="aligncenter size-full wp-image-2740" alt="BugCYS7CQAAWhOV.jpg:large" src="{{ site.baseurl }}/assets/BugCYS7CQAAWhOV.jpglarge.jpeg" width="978" height="233" /></a></p>
<p style="text-align: justify;">Cette édition, tout comme les précédentes, a connu un grand succès. Elle a vu le nombre de participants doubler par rapport à la troisième édition. Les gens venaient de différents pays, comme la France, la Roumanie, l'Autriche, l'Angleterre, les USA, l'Inde, et l'Allemagne pays hôte. La conférence est gratuite. Les seuls frais à supporter sont l'hébergement (repas inclus) et le transport. Il y a des sponsors mais sans présence physique (pas de pub, pas de stand).</p>
<p style="text-align: justify;">La première idée qui nous traverse quand on sort de Socrates c'est d'expérimenter l'idée ailleurs, comme l'ont déjà fait les anglais avec <strong><span style="color: #000080;"><a href="http://socratesuk.org/"><span style="color: #000080;">SocratesUK</span></a></span></strong>.</p>
<h2><strong>Le lieu : Soltau</strong></h2>
<p><a href="http://www.arolla.fr/blog/wp-content/uploads/2014/09/SoCraTes-2014-01.jpg"><img class="aligncenter size-medium wp-image-2747" alt="SoCraTes-2014-01" src="{{ site.baseurl }}/assets/SoCraTes-2014-01-300x200.jpg" width="300" height="200" /></a></p>
<p style="text-align: justify;">La conférence s'est tenue à Soltau, une ville située à une heure de Hamburg, au Nord de l'Allemagne. L’hôtel se trouve en plein milieu de la forêt, bien isolé et assez grand pour assurer la tranquillité. Les participants avaient à leur disposition des salles de conférence, des chambres, un restaurant, un bar, un sauna, une piscine et un très grand parc... quasiment tout l'hôtel. Un cadre qui offre assez de liberté, qui favorise l'échange et stimule l'émergence de nouvelles idées.</p>
<h2><strong>World-café</strong></h2>
<p style="text-align: justify;"><a href="http://www.arolla.fr/blog/wp-content/uploads/2014/09/world-cafe-2.jpg"><img class="alignleft size-thumbnail wp-image-2727" alt="world-cafe-2" src="{{ site.baseurl }}/assets/world-cafe-2-150x150.jpg" width="150" height="150" /></a>La conférence démarre officiellement avec le World-café. C'est le moment où les participants se rencontrent pour la première fois. Le Word-café est une forme d'échange qui offre un cadre de discussion informel dans une ambiance de café. Son but est de faciliter l'implication de tous les participants d'une discussion sur un topic. De petits groupes de 8 personnes se forment autour de tables disposées dans plusieurs salles pour échanger sur leurs attentes et motivations à participer à Socrates (What are we here for ? Where do we want to go ?) . Chaque table a un chef “fixe” qui joue le rôle de facilitateur. Au bout de 15 minutes, les groupes se dispersent, de nouveaux groupes s'organisent pour un nouveau round. Le processus se répète plusieurs fois. A la fin, les résumés des différentes discussions sont affichés sur des tableaux mis à la disposition du public.</p>
<h2><strong>Les sessions</strong></h2>
<p style="text-align: justify;">Jusqu'à la veille, les sessions d'une journée ne sont pas connues. C'est le jour J à 09h30 que les intéressés proposent leurs sujets avec l'intitulé, l'heure, la salle et la durée. Les formats des sessions varient entre Workshop, Hand-on, Kata, Rex et Open door. Ce qui laisse à chacun la possibilité d'adapter sa présentation. Aucun format n'est imposé, on voit très peu de slides, pour la plupart ce sont des flipcharts et des projections de live-coding. On s'en fout pas mal de la forme. Le plus important à SoCraTes c'est d'avoir une idée qui intéresse les autres. Les contenus ne sont pas figés, ils 'adaptent en fonction de l'attente de l'audience. On est loin de la passivité des publics des grandes conférences très “académiques”. Chacun peut participer à une session, en apportant des informations supplémentaires, et parfois en donnant une autre orientation au sujet. Une session peut donner naissance à une nouvelle session pour le lendemain, et ou se poursuivre le soir sous forme de discussion, de Hands-on ou de Kata.</p>
<h2><strong>Deux sujets choisis</strong></h2>
<p style="text-align: justify;">Il y avait jusqu'à six sessions simultanément, avec comme principaux thèmes Test, Design, Architecture, Programming et Tooling. Je vous présente ici deux sujets qui ont été très suivis.</p>
<h3><strong>Event sourcing</strong></h3>
<p style="text-align: justify;">Une introduction de l'Event Sourcing par une comparaison avec les RDBMs. En RDBMs les objets sont mappées sur les tables. Tout changement, même partiel, d'état de l'objet en mémoire entraîne une mise à jour complète de la table en base. La table ne contient donc que le dernier état de l'objet. Avec l'approche Event Sourcing pas besoin de faire du mapping Object-Relanionnal, ce sont les événements (Event) - Création, Suppression et Modification - qu'on stocke dans la base. Le gain en performance peut être assez considérable. On maintient l'historique des différents états intermédiaires de la table de sorte à pouvoir construire son état courant ou retrouver différents états avec des Revert et des Rollback comme dans un SGV.</p>
<p style="text-align: justify;">On peut lire sur le blog de Martin Fowler :</p>
<blockquote>
<p style="text-align: justify;"><em>The fundamental idea of Event Sourcing is that of ensuring every change to the state of an application is captured in an event object, and that these event objects are themselves stored in the sequence they were applied for the same lifetime as the application state itself.</em></p>
</blockquote>
<p>Exemple d'un compte bancaire : source <a href="http://ookami86.github.io/event-sourcing-in-practice/">http://ookami86.github.io/event-sourcing-in-practice/</a></p>
<p>En RDBM on aura un seul objet pour la table</p>
<blockquote><p><strong>Account</strong> (accountNumber, owner, amount)</p></blockquote>
<p>En Event Sourcing on créera un objet Event pour chaque événement sur l'objet</p>
<blockquote><p><strong>AcountCreated</strong>(accountNumber, owner) pour la création de compte<br />
<strong>DepositedPerormed</strong>(accountNumber, amount) pour le crédit<br />
<strong>WithdrawPerormed</strong>(accountNumber, amount) pour le débit</p></blockquote>
<p>Restauration : Retrouver l'état courant à partir des Events</p>
<blockquote><p><strong>AcountCreated</strong>(accountNumber, amount)<br />
.applyTo(EmptyAccount)</p>
<p><strong>=&gt;</strong> Account (accountNumber, owner, 0)</p></blockquote>
<blockquote><p><strong>DepositedPerormed</strong>(accountNumber, 100)<br />
.applyTo(Account (accountNumber, owner, 0))</p>
<p><strong>=&gt;</strong> Account (accountNumber, owner, 100)</p></blockquote>
<h3><strong>Architecture Micro-services</strong></h3>
<p style="text-align: justify;">Très tôt dans le développement logiciel une conception de l'architecture s'est imposée naturellement, comme allant de soi. L'Architecture Monolithique qui se caractérise par un découpage technique en trois parties - IHM, Métier et BD - obéit à une organisation des équipes en Technical Unit (DBA, Dev et IHM travaillent séparément). Son implémentation est très simple et facilitée par la prolifération de différents frameworks. Mais elle montre très tôt ses limites dans un contexte de cloud computing de scalabilité récurrente. Elle se heurte également à la culture Devops, toute modification - même partielle - entraîne un déploiement global de l'application.</p>
<p style="text-align: justify;">L'Architecture Micro-services promeut un découpage fonctionnel. L'application est composée de services “autonomes” pouvant être déployés et scalés indépendamment les uns des autres. Ce style d'Architecture implique une organisation des équipes autour de Business Unit (Dev, Admin et IHM travaillent ensemble). Elle permet aussi la cohabitation dans l'application de plateformes technologiques différentes avec des sources de données hétérogènes (RDBMs, NoSQL, XML, JSON, ...).</p>
<p style="text-align: justify;"><a href="http://www.arolla.fr/blog/wp-content/uploads/2014/09/micro-service-architecture.png"><img class="aligncenter size-full wp-image-2729" alt="micro-service-architecture" src="{{ site.baseurl }}/assets/micro-service-architecture.png" width="600" height="282" /></a></p>
<blockquote>
<p style="text-align: justify;">In a microservice architecture a large number of very small services are deployed and linked up to build systems, with the services mapping closely to business concepts and value.</p>
</blockquote>
<p style="text-align: justify;">En complément de l'absence de définition formelle, Heroku, s'inspirant de retours d'expériences acquis sur plusieurs projets, publie sous forme de manifeste <strong><span style="color: #003366;"><a href="http://12factor.net/"><span style="color: #003366;">The Twelve Factors</span></a></span></strong>. Le document décrit en 12 points les caractéristiques et bonnes pratiques (déjà connues des développeurs web) d'une architecture micro-services. C'était notre sujet de discussion de la première session sur les architecture micro-services.</p>
<p style="text-align: justify; padding-left: 30px;"><strong>I. Codebase :</strong> Le code doit être versionné dans un Repository, de préférence un par service.<br />
<strong>II. Dependencies :</strong> Les dépendances doivent être déclarées explicitement et isolées.<br />
<strong>III. Config :</strong> Tout changement qui dépend d'un environnement (DB, password, niveau de log, …) doit être géré en dehors du code.<br />
<strong>IV. Backing Services :</strong> Les services tels que DB, SMTP, Rabbit MQ, … doivent être traités comme des ressources externes accessibles via des URL, qu'ils soient sur la même machine ou ailleurs sur le réseau.<br />
<strong>V. Build, release, run :</strong> L'application doit passer par les phases de build et de release avant son utilisation.<br />
<strong>VI. Processes :</strong> L'application doit être exécutée comme un ou plusieurs processus sans état.<br />
<strong>VII. Port binding :</strong> Les services doivent être exposés à travers des ports.<br />
<strong>VIII. Concurrency :</strong> Si l'application doit déléguer du traitement (requête http, tâche de fond, ...) il ne faut pas que ce soit à un processus fils ou à daemon mais à un processus de premier niveau.<br />
<strong>IX. Disposability :</strong> Les processus de l'application doivent pouvoir être démarrés/arrêtés rapidement pour faciliter la scalabilité, rendre les déploiements fluides et assurer une reprise après pannes.<br />
<strong>X. Dev/prod parity :</strong> Les différents environnements (Dev, Test, Prod, …) doivent être similaires, même version d'OS, de BD, ... Ce qu'on est capable de faire en prod, on doit être capable de le reproduire en développement.<br />
<strong>XI. Logs :</strong> Les logs sont gérés comme des streams. L'affichage sur console ou l'écriture sur disque doivent être gérés en dehors de l'application.<br />
<strong>XII. Admin processes :</strong> Les tâches administratives (migration de BD, execution de script shell, ...) doivent être exécutées dans des processus (à travers un script par exemple) et non manuellement.</p>
<p style="text-align: justify;">Il y a de multiples raisons objectives de trouver dans les architectures micro-services un futur possible du Système d'Information. En revanche elles exigent des effort supplémentaires pour leur mise en œuvre, dans la prise en main de nouveaux outils (provisionning, monitoring, déploiement continu), et l'adoption de la culture Devops. Martin Fowler explique dans <span style="color: #003366;"><strong><a href="http://martinfowler.com/bliki/MicroservicePrerequisites.html"><span style="color: #003366;">son article</span></a></strong></span> les cas d'utilisation.</p>
